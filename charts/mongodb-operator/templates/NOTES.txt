
MongoDB Operator has been installed successfully!

1. Check the operator is running:

   kubectl get pods -n {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "mongodb-operator.name" . }}"

2. Create a MongoDB ReplicaSet:

   cat <<EOF | kubectl apply -f -
   apiVersion: mongodb.keiailab.com/v1alpha1
   kind: MongoDB
   metadata:
     name: my-mongodb
     namespace: default
   spec:
     members: 3
     version:
       version: "{{ .Values.mongodb.version }}"
     storage:
       storageClassName: {{ .Values.mongodb.storageClassName | default "standard" }}
       size: 10Gi
     auth:
       mechanism: SCRAM-SHA-256
       adminCredentialsSecretRef:
         name: mongodb-admin
   EOF

3. Create a MongoDB Sharded Cluster:

   cat <<EOF | kubectl apply -f -
   apiVersion: mongodb.keiailab.com/v1alpha1
   kind: MongoDBSharded
   metadata:
     name: my-sharded
     namespace: default
   spec:
     version:
       version: "{{ .Values.mongodb.version }}"
     configServer:
       members: 3
       storage:
         size: 5Gi
     shards:
       count: 2
       membersPerShard: 3
       storage:
         size: 20Gi
     mongos:
       replicas: 2
   EOF

4. Check MongoDB resources:

   kubectl get mdb,mdbsh,mdbbackup -A

5. View operator logs:

   kubectl logs -n {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "mongodb-operator.name" . }}" -f

For more information, visit: https://github.com/keiailab/mongodb-operator
